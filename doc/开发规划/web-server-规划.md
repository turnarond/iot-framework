您的理解**完全正确，而且非常务实！** ✅

在边缘 BAS 系统的早期落地阶段，**“可配置、可验证、可控制”比“历史存储”更重要**。历史数据是**可观测性**的一部分，但 MVP（最小可行产品）的核心是 **闭环能力 + 人机交互**。

---

## ✅ 您的优先级判断非常精准：

> **MVP = 配置（Web） + 实时监控 + 报警 + 联动控制**  
> **历史数据 → 后续增强项**

### 为什么？
| 能力 | 对 MVP 的价值 | 用户感知 |
|------|--------------|--------|
| **Web 配置点位/报警/联动** | ⭐⭐⭐⭐⭐ | 工程师无需改代码即可部署逻辑 |
| **实时值显示 + 控制** | ⭐⭐⭐⭐⭐ | “我点一下，风机真的转了！” —— 建立信任 |
| **报警产生与恢复** | ⭐⭐⭐⭐ | 核心安全功能 |
| **联动自动执行** | ⭐⭐⭐⭐ | 展示智能化价值 |
| **历史趋势图** | ⭐⭐ | “锦上添花”，非核心 |

> 📌 **现场验收时，客户更关心：“能不能配？能不能控？报不报警？” 而不是“过去24小时温度曲线”。**

---

## 🔧 推荐的 MVP 开发顺序（聚焦交付）

### 第一步：**固化数据库结构（1天）**
- 确认 `bas-business.db` 包含：
  - `t_points`（含 `enable_control`）
  - `t_alarm_rules`
  - `t_linkage_*` 表
  - （**暂不建 `t_history_data`**）
- 提供 **初始化 SQL 脚本**（由 `nodeserver` 或 `web-server` 首次启动时执行）

> 💡 此时数据库只存 **配置元数据**，不存实时值或历史值。

---

### 第二步：**实现 Web 配置门户（核心！3~5天）**
#### 最小功能集（MVP）：
| 页面 | 功能 |
|------|------|
| **设备 & 点位管理** | - 添加 Modbus 设备- 创建点位（地址、类型、是否可写） |
| **报警规则配置** | - 选择点位- 设置高限/低限阈值- 启用/禁用 |
| **联动规则配置** | - 触发条件：报警产生- 动作：写另一个点位（如“超温 → 关风机”） |
| **实时监控面板** | - 显示当前点位值（轮询 API）- 显示当前报警状态（红/绿）- **支持手动写点（控制）** |

#### 技术要点：
- **后端 API** 由 `web-server` 直接读写 `bas-business.db`（因无高频写入，安全）；
- **实时值** 通过 `GET /api/points/current` 从 `nodeserver` 获取（`nodeserver` 内存缓存最新值）；
- **控制指令**：`POST /api/points/{id}/write` → `web-server` → `nodeserver` → 驱动写入。

> ✅ 这样就形成了完整闭环：**配 → 看 → 控 → 报 → 联**

---

### 第三步：**集成仿真驱动（1天）**
- 在 Web 界面中允许创建 **仿真设备**（如正弦波温度）；
- 无需真实 PLC，即可演示 **报警 → 联动 → 控制** 全流程；
- 极大提升现场演示和测试效率。

---

### 第四步（MVP 完成）：**现场验证闭环**
1. 工程师通过 Web 添加一个仿真点位 `temp_sim`；
2. 配置报警规则：`temp_sim > 30 → 报警`；
3. 配置联动：`当 temp_sim 报警 → 写点位 fan_status = 0`；
4. 观察：`temp_sim` 升到 31 → 报警弹出 → `fan_status` 自动变 0；
5. 手动确认报警，系统恢复正常。

> 🎯 **这就是客户眼中的“智能边缘 BAS”！**

---

## 📌 历史数据何时加？

- **MVP 验收后**，作为 V1.1 功能加入；
- 或当客户明确要求“查看过去一小时趋势”时再开发；
- 到那时，您已有稳定的数据采集通道（`nodeserver`），只需增加写入逻辑。

---

## ✅ 总结：您的思路完全正确

> **先让系统“可配、可控、可联动”，再让它“可追溯”。**  
> 这是工业软件落地的经典路径：**功能闭环 → 数据沉淀 → 智能优化**。

**下一步行动建议：**
1. 冻结 `bas-business.db` 的配置表结构（不含历史表）；
2. 启动 `web-server` 开发，聚焦配置 + 实时监控 + 控制；
3. 同步在 `nodeserver` 中暴露 **当前值查询** 和 **写点接口**。

这样，2周内即可交付一个**可演示、可配置、有业务价值**的边缘 BAS MVP！

如果需要，我可以立即为您提供：
- `web-server` 的 REST API 设计草案（OpenAPI 3.0）
- Web 前端页面原型（Figma 或 HTML 草图）
- `nodeserver` 的当前值缓存 + 写点接口伪代码

请告诉我您想先看哪一部分！